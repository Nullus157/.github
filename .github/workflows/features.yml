jobs:
  check-features:
    name: cargo hack check --feature-powerset
    runs-on: ubuntu-latest
    env:
      RUSTFLAGS: -Dwarnings
    steps:
    - uses: actions/checkout@v4
      with:
        repository: Nullus157/.github
        ref: ${{ github.workflow_sha }}
        path: .nullus.github
    - uses: ./.nullus.github/.github/actions/setup
    - uses: taiki-e/install-action@v2
      with:
        tool: cargo-hack
    - run:
        cargo hack check
          --workspace --feature-powerset --no-dev-deps
          --skip "${{ inputs.skip }}"

on:
  workflow_call:
    inputs:
      skip:
        default: ''
        type: string
